<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPMOS - Smart Parking Optimization System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563EB',
                        secondary: '#059669',
                        accent: '#DC2626',
                        muted: '#64748B',
                    }
                }
            }
        };
    </script>
</head>
<body class="font-inter bg-slate-50 text-slate-800">
    <!-- @COMPONENT: SPMOSApp [Main application container] -->
    <div id="app" class="min-h-screen">
        
        <!-- @COMPONENT: AuthModal [Login/Signup interface] -->
        <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
                <div class="text-center mb-6">
                    <h1 class="text-3xl font-bold text-primary mb-2">SPMOS</h1>
                    <p class="text-muted">Smart Parking Optimization System</p>
                </div>
                
                <!-- Login Form -->
                <div id="loginForm" class="space-y-4">
                    <h2 class="text-xl font-semibold mb-4">Welcome Back</h2>
                    <div>
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="your.email@example.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="••••••••">
                    </div>
                    <button data-event="click:handleLogin" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                        Sign In
                    </button>
                    <p class="text-center text-sm text-muted">
                        Don't have an account? 
                        <button data-event="click:showSignup" class="text-primary hover:underline">Sign up</button>
                    </p>
                </div>

                <!-- Signup Form (Hidden by default) -->
                <div id="signupForm" class="space-y-4 hidden">
                    <h2 class="text-xl font-semibold mb-4">Create Account</h2>
                    <div>
                        <label class="block text-sm font-medium mb-2">Full Name</label>
                        <input type="text" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="John Doe">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="your.email@example.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Phone Number</label>
                        <input type="tel" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="+91 98765 43210">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="••••••••">
                    </div>
                    <button data-event="click:handleSignup" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                        Create Account
                    </button>
                    <p class="text-center text-sm text-muted">
                        Already have an account? 
                        <button data-event="click:showLogin" class="text-primary hover:underline">Sign in</button>
                    </p>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: AuthModal -->

        <!-- @COMPONENT: MainApp [Main application after authentication] -->
        <div id="mainApp" class="hidden">
            <!-- @COMPONENT: NavigationHeader [Top navigation bar] -->
            <nav class="bg-white shadow-sm border-b border-slate-200">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-center h-16">
                        <div class="flex items-center space-x-4">
                            <h1 class="text-2xl font-bold text-primary">SPMOS</h1>
                            <span class="text-sm text-muted hidden sm:block">Smart Parking Optimization</span>
                        </div>
                        <div class="flex items-center space-x-4">
                            <span data-bind="user.name" class="text-sm font-medium">John Doe</span>
                            <button data-event="click:handleLogout" class="text-muted hover:text-accent transition-colors">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- @END_COMPONENT: NavigationHeader -->

            <!-- @COMPONENT: LandingPage [Enhanced landing page with hero section] -->
            <div id="landingPage">
                <!-- Hero Section -->
                <!-- A panoramic view of Gangtok city with mountains in the background -->
                <div class="relative bg-gradient-to-r from-primary to-blue-600 text-white overflow-hidden">
                    <div class="absolute inset-0 bg-black opacity-30"></div>
                    <div style="background-image: url('https://images.unsplash.com/photo-1544735716-392fe2489ffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&h=1080'); background-size: cover; background-position: center;" class="absolute inset-0 opacity-20"></div>
                    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
                        <div class="text-center">
                            <h1 class="text-4xl md:text-6xl font-bold mb-6">
                                Find Perfect Parking
                                <span class="block text-yellow-300">in Sikkim</span>
                            </h1>
                            <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto opacity-90">
                                Smart, efficient parking solutions for Gangtok, Namchi, and across beautiful Sikkim. Real-time availability, easy booking, seamless experience.
                            </p>
                            <button data-event="click:showSearchPage" class="bg-white text-primary px-8 py-4 rounded-lg font-semibold text-lg hover:bg-slate-100 transition-colors shadow-lg">
                                Find Parking Spots
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="py-20 bg-white">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-16">
                            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">
                                Why Choose SPMOS?
                            </h2>
                            <p class="text-xl text-muted max-w-3xl mx-auto">
                                Experience the future of parking with our smart optimization system designed for Sikkim's unique landscape.
                            </p>
                        </div>
                        
                        <div class="grid md:grid-cols-3 gap-8">
                            <div class="text-center p-8 rounded-2xl bg-slate-50 hover:bg-slate-100 transition-colors">
                                <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-search text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-semibold mb-4">Real-Time Search</h3>
                                <p class="text-muted">Find available parking spots instantly across MG Marg, Lal Bazaar, and other prime Sikkim locations.</p>
                            </div>
                            
                            <div class="text-center p-8 rounded-2xl bg-slate-50 hover:bg-slate-100 transition-colors">
                                <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-mobile-alt text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-semibold mb-4">Smart Booking</h3>
                                <p class="text-muted">Reserve your spot in advance with our intelligent booking system. No more circling around looking for parking.</p>
                            </div>
                            
                            <div class="text-center p-8 rounded-2xl bg-slate-50 hover:bg-slate-100 transition-colors">
                                <div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fas fa-rupee-sign text-white text-2xl"></i>
                                </div>
                                <h3 class="text-xl font-semibold mb-4">Transparent Pricing</h3>
                                <p class="text-muted">Clear, upfront pricing in Indian Rupees. No hidden fees, no surprises. Pay only for what you use.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonials Section -->
                <div class="py-20 bg-slate-50">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-16">
                            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">
                                What Our Users Say
                            </h2>
                        </div>
                        
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                            <div class="bg-white p-6 rounded-2xl shadow-lg">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-bold">TS</div>
                                    <div class="ml-4">
                                        <h4 class="font-semibold" data-mock="true">Tenzin Sherpa</h4>
                                        <p class="text-sm text-muted" data-mock="true">Local Business Owner</p>
                                    </div>
                                </div>
                                <p class="text-muted" data-mock="true">"SPMOS has made parking in MG Marg so much easier for my customers. The real-time availability is a game-changer!"</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-2xl shadow-lg">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-secondary rounded-full flex items-center justify-center text-white font-bold">PL</div>
                                    <div class="ml-4">
                                        <h4 class="font-semibold" data-mock="true">Pema Lama</h4>
                                        <p class="text-sm text-muted" data-mock="true">Tourist Guide</p>
                                    </div>
                                </div>
                                <p class="text-muted" data-mock="true">"As a tourist guide, I recommend SPMOS to all visitors. It saves time and reduces stress when exploring Gangtok."</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-2xl shadow-lg">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold">KG</div>
                                    <div class="ml-4">
                                        <h4 class="font-semibold" data-mock="true">Karma Gyatso</h4>
                                        <p class="text-sm text-muted" data-mock="true">IT Professional</p>
                                    </div>
                                </div>
                                <p class="text-muted" data-mock="true">"The app is incredibly user-friendly and the pricing is transparent. Perfect for daily commuters like me."</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: LandingPage -->

            <!-- @COMPONENT: SearchPage [Main parking search interface] -->
            <div id="searchPage" class="hidden min-h-screen bg-slate-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    
                    <!-- Search and Filter Bar -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
                        <div class="flex flex-col lg:flex-row gap-4 items-center">
                            <div class="flex-1 relative">
                                <i class="fas fa-search absolute left-3 top-3 text-muted"></i>
                                <input 
                                    type="text" 
                                    data-event="input:handleSearch"
                                    placeholder="Search parking spots in Sikkim..." 
                                    class="w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                                >
                            </div>
                            
                            <div class="flex gap-4 flex-wrap">
                                <select data-event="change:handleLocationFilter" class="px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option>All Locations</option>
                                    <option>Gangtok</option>
                                    <option>Namchi</option>
                                    <option>Pelling</option>
                                    <option>Yuksom</option>
                                </select>
                                
                                <select data-event="change:handlePriceFilter" class="px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option>Any Price</option>
                                    <option>₹20-50/hour</option>
                                    <option>₹50-100/hour</option>
                                    <option>₹100+/hour</option>
                                </select>
                                
                                <select data-event="change:handleAvailabilityFilter" class="px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option>All Status</option>
                                    <option>Available</option>
                                    <option>Almost Full</option>
                                </select>
                            </div>
                            
                            <button data-event="click:toggleView" class="px-4 py-3 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors">
                                <i class="fas fa-th-large"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Results Summary -->
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold mb-2">Available Parking Spots</h2>
                        <p class="text-muted">
                            <span data-bind="searchResults.count">12</span> parking spots found in Sikkim
                            <span class="ml-4 text-secondary">
                                <i class="fas fa-circle text-xs mr-1"></i>
                                <span data-bind="searchResults.available">8</span> available now
                            </span>
                        </p>
                    </div>

                    <!-- @MAP: parkingSpots.map(spot => ( -->
                    <!-- Parking Spots Grid -->
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="parkingSpotsGrid">
                        
                        <!-- Parking Spot Card 1 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="1">
                            <div class="relative">
                                <!-- A view of MG Marg pedestrian street in Gangtok with shops and people -->
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="MG Marg Parking Area" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-circle text-xs mr-1"></i>
                                        Available
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹40/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">MG Marg Central Parking</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Near Tibet Road, Gangtok, Sikkim 737101</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-secondary font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">12</span>/<span data-bind="spot.total">20</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            24/7
                                        </span>
                                    </div>
                                    <button class="text-primary hover:text-blue-700 font-medium">
                                        Book Now
                                        <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parking Spot Card 2 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="2">
                            <div class="relative">
                                <!-- A view of traditional Sikkimese marketplace with local vendors -->
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="Lal Bazaar Parking Area" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-yellow-500 text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-circle text-xs mr-1"></i>
                                        Almost Full
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹35/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">Lal Bazaar Shopping Complex</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Market Road, Gangtok, Sikkim 737101</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-yellow-600 font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">3</span>/<span data-bind="spot.total">15</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            6AM-10PM
                                        </span>
                                    </div>
                                    <button class="text-primary hover:text-blue-700 font-medium">
                                        Book Now
                                        <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parking Spot Card 3 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="3">
                            <div class="relative">
                                <!-- A view of Rumtek Monastery area with parking space -->
                                <img src="https://images.unsplash.com/photo-1544735716-392fe2489ffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="Rumtek Monastery Parking" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-circle text-xs mr-1"></i>
                                        Available
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹25/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">Rumtek Monastery Parking</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Rumtek Road, East Sikkim 737135</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-secondary font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">25</span>/<span data-bind="spot.total">30</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            5AM-8PM
                                        </span>
                                    </div>
                                    <button class="text-primary hover:text-blue-700 font-medium">
                                        Book Now
                                        <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parking Spot Card 4 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="4">
                            <div class="relative">
                                <!-- A view of Namchi town center with parking area -->
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="Namchi Central Parking" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-circle text-xs mr-1"></i>
                                        Available
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹30/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">Namchi Central Plaza</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Central Road, Namchi, South Sikkim 737126</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-secondary font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">18</span>/<span data-bind="spot.total">25</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            24/7
                                        </span>
                                    </div>
                                    <button class="text-primary hover:text-blue-700 font-medium">
                                        Book Now
                                        <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parking Spot Card 5 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="5">
                            <div class="relative">
                                <!-- A view of Pelling town with mountain backdrop -->
                                <img src="https://images.unsplash.com/photo-1544735716-392fe2489ffa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="Pelling Tourist Parking" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-accent text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-times text-xs mr-1"></i>
                                        Full
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹45/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6 opacity-75">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">Pelling Tourist Hub</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Upper Pelling, West Sikkim 737113</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-accent font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">0</span>/<span data-bind="spot.total">12</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            7AM-9PM
                                        </span>
                                    </div>
                                    <button disabled class="text-muted cursor-not-allowed">
                                        Full
                                        <i class="fas fa-times ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Parking Spot Card 6 -->
                        <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-shadow overflow-hidden cursor-pointer" data-event="click:openBookingModal" data-spot-id="6">
                            <div class="relative">
                                <!-- A view of government building complex in Gangtok -->
                                <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&h=400" alt="Secretariat Parking" class="w-full h-48 object-cover">
                                <div class="absolute top-4 left-4">
                                    <span class="px-3 py-1 bg-secondary text-white rounded-full text-sm font-medium">
                                        <i class="fas fa-circle text-xs mr-1"></i>
                                        Available
                                    </span>
                                </div>
                                <div class="absolute top-4 right-4">
                                    <span class="px-3 py-1 bg-white text-primary rounded-full text-sm font-bold">
                                        ₹50/hr
                                    </span>
                                </div>
                            </div>
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-2" data-mock="true">Secretariat Complex Parking</h3>
                                <p class="text-muted text-sm mb-4" data-mock="true">Tashiling, Gangtok, Sikkim 737103</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4 text-sm">
                                        <span class="text-secondary font-medium">
                                            <i class="fas fa-car mr-1"></i>
                                            <span data-bind="spot.available">8</span>/<span data-bind="spot.total">10</span>
                                        </span>
                                        <span class="text-muted">
                                            <i class="fas fa-clock mr-1"></i>
                                            9AM-6PM
                                        </span>
                                    </div>
                                    <button class="text-primary hover:text-blue-700 font-medium">
                                        Book Now
                                        <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- @END_MAP -->
                </div>
            </div>
            <!-- @END_COMPONENT: SearchPage -->

            <!-- @COMPONENT: BookingModal [Detailed booking interface] -->
            <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="relative">
                        <!-- A detailed view of MG Marg parking facility -->
                        <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1200&h=600" alt="Parking facility detail view" class="w-full h-64 object-cover rounded-t-2xl">
                        <button data-event="click:closeModal" class="absolute top-4 right-4 w-8 h-8 bg-white rounded-full flex items-center justify-center text-slate-600 hover:text-slate-800">
                            <i class="fas fa-times"></i>
                        </button>
                        <div class="absolute top-4 left-4">
                            <span class="px-4 py-2 bg-secondary text-white rounded-full font-medium">
                                <i class="fas fa-circle text-xs mr-2"></i>
                                Available
                            </span>
                        </div>
                    </div>
                    
                    <div class="p-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold mb-2" data-bind="selectedSpot.name" data-mock="true">MG Marg Central Parking</h2>
                            <p class="text-muted mb-4" data-bind="selectedSpot.address" data-mock="true">Near Tibet Road, Gangtok, Sikkim 737101</p>
                            
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                <div class="text-center p-4 bg-slate-50 rounded-lg">
                                    <div class="text-2xl font-bold text-primary" data-bind="selectedSpot.rate">₹40</div>
                                    <div class="text-sm text-muted">per hour</div>
                                </div>
                                <div class="text-center p-4 bg-slate-50 rounded-lg">
                                    <div class="text-2xl font-bold text-secondary" data-bind="selectedSpot.available">12</div>
                                    <div class="text-sm text-muted">available</div>
                                </div>
                                <div class="text-center p-4 bg-slate-50 rounded-lg">
                                    <div class="text-lg font-bold text-slate-800">24/7</div>
                                    <div class="text-sm text-muted">operating</div>
                                </div>
                                <div class="text-center p-4 bg-slate-50 rounded-lg">
                                    <div class="text-lg font-bold text-slate-800">2 min</div>
                                    <div class="text-sm text-muted">walk to MG Marg</div>
                                </div>
                            </div>
                        </div>

                        <!-- Booking Form -->
                        <div class="border-t pt-6">
                            <h3 class="text-lg font-semibold mb-4">Reserve Your Spot</h3>
                            <div class="grid md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Vehicle Number</label>
                                    <input type="text" data-mock="true" placeholder="SK 01 AB 1234" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Vehicle Type</label>
                                    <select class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option>Car (4-wheeler)</option>
                                        <option>Motorcycle (2-wheeler)</option>
                                        <option>SUV/Van</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Expected Duration</label>
                                    <select data-event="change:calculateTotal" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="1">1 hour</option>
                                        <option value="2">2 hours</option>
                                        <option value="3">3 hours</option>
                                        <option value="4">4 hours</option>
                                        <option value="8">8 hours (Full day)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Start Time</label>
                                    <input type="datetime-local" data-mock="true" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>

                            <!-- Cost Summary -->
                            <div class="bg-slate-50 rounded-lg p-4 mb-6">
                                <h4 class="font-semibold mb-3">Cost Summary</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span>Rate per hour:</span>
                                        <span data-bind="booking.hourlyRate">₹40</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Duration:</span>
                                        <span data-bind="booking.duration">2 hours</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Subtotal:</span>
                                        <span data-bind="booking.subtotal">₹80</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Service fee:</span>
                                        <span data-bind="booking.serviceFee">₹5</span>
                                    </div>
                                    <hr class="my-2">
                                    <div class="flex justify-between font-semibold text-lg">
                                        <span>Total:</span>
                                        <span data-bind="booking.total" class="text-primary">₹85</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-4">
                                <button data-event="click:closeModal" class="flex-1 px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors">
                                    Cancel
                                </button>
                                <button data-event="click:confirmBooking" class="flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                    Confirm Booking
                                    <i class="fas fa-check ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: BookingModal -->

            <!-- @COMPONENT: ParkingSession [Active parking session interface] -->
            <div id="parkingSession" class="hidden min-h-screen bg-slate-50">
                <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    
                    <!-- Session Header -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <h1 class="text-2xl font-bold">Active Parking Session</h1>
                            <span class="px-4 py-2 bg-secondary text-white rounded-full font-medium">
                                <i class="fas fa-circle text-xs mr-2"></i>
                                In Progress
                            </span>
                        </div>
                        
                        <div class="grid md:grid-cols-3 gap-6">
                            <div>
                                <h3 class="font-semibold mb-2" data-mock="true">MG Marg Central Parking</h3>
                                <p class="text-muted text-sm" data-mock="true">Near Tibet Road, Gangtok</p>
                                <p class="text-sm mt-2">
                                    <span class="font-medium">Vehicle:</span> 
                                    <span data-mock="true">SK 01 AB 1234</span>
                                </p>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-3xl font-bold text-primary mb-1" data-bind="session.duration" id="sessionTimer">01:23:45</div>
                                <p class="text-sm text-muted">Session Duration</p>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-3xl font-bold text-secondary mb-1" data-bind="session.currentCost">₹65.50</div>
                                <p class="text-sm text-muted">Current Cost</p>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Card -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold mb-2">
                                    <i class="fas fa-route text-primary mr-2"></i>
                                    Navigation
                                </h3>
                                <p class="text-muted">Need directions to your parking spot?</p>
                            </div>
                            <button data-event="click:showNavigation" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-map-marked-alt mr-2"></i>
                                Get Directions
                            </button>
                        </div>
                    </div>

                    <!-- Session Actions -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
                        <h3 class="text-lg font-semibold mb-4">Session Actions</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <button data-event="click:extendSession" class="p-4 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-left">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-4">
                                        <i class="fas fa-clock text-yellow-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Extend Session</h4>
                                        <p class="text-sm text-muted">Add more time to your parking</p>
                                    </div>
                                </div>
                            </button>
                            
                            <button data-event="click:contactSupport" class="p-4 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-left">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                        <i class="fas fa-headset text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Get Help</h4>
                                        <p class="text-sm text-muted">Contact customer support</p>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- End Session -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 border border-red-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-semibold text-accent mb-2">End Parking Session</h3>
                                <p class="text-muted">Ready to leave? End your session and complete payment.</p>
                            </div>
                            <button data-event="click:endSession" class="px-6 py-3 bg-accent text-white rounded-lg hover:bg-red-700 transition-colors font-medium">
                                <i class="fas fa-stop mr-2"></i>
                                End Session
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: ParkingSession -->

            <!-- @COMPONENT: NavigationModal [Simple navigation placeholder] -->
            <div id="navigationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-2xl max-w-md w-full mx-4 p-6">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-map-marked-alt text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Navigation</h3>
                        <p class="text-muted mb-6">In a real app, this would integrate with Google Maps or similar navigation service to provide turn-by-turn directions to your parking spot.</p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="text-left p-3 bg-slate-50 rounded-lg">
                                <p class="text-sm"><strong>From:</strong> Your current location</p>
                            </div>
                            <div class="text-left p-3 bg-slate-50 rounded-lg">
                                <p class="text-sm" data-mock="true"><strong>To:</strong> MG Marg Central Parking</p>
                            </div>
                            <div class="text-left p-3 bg-blue-50 rounded-lg">
                                <p class="text-sm text-primary"><strong>ETA:</strong> 8 minutes (2.3 km)</p>
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button data-event="click:closeNavigationModal" class="flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors">
                                Close
                            </button>
                            <button data-event="click:openExternalMap" class="flex-1 px-4 py-3 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors">
                                Open Maps
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: NavigationModal -->

            <!-- @COMPONENT: SessionSummary [Final session summary and payment] -->
            <div id="sessionSummary" class="hidden min-h-screen bg-slate-50">
                <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    
                    <!-- Success Header -->
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check text-white text-3xl"></i>
                        </div>
                        <h1 class="text-3xl font-bold text-slate-900 mb-2">Session Complete!</h1>
                        <p class="text-muted">Thank you for using SPMOS. Here's your parking summary.</p>
                    </div>

                    <!-- Session Details -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-6">
                        <h2 class="text-xl font-semibold mb-4">Session Details</h2>
                        
                        <div class="space-y-4">
                            <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                <span class="text-muted">Location:</span>
                                <span class="font-medium" data-mock="true">MG Marg Central Parking</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                <span class="text-muted">Vehicle:</span>
                                <span class="font-medium" data-mock="true">SK 01 AB 1234</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                <span class="text-muted">Start Time:</span>
                                <span class="font-medium" data-bind="session.startTime" data-mock="true">14:30, Dec 15, 2024</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-slate-100">
                                <span class="text-muted">End Time:</span>
                                <span class="font-medium" data-bind="session.endTime" data-mock="true">16:15, Dec 15, 2024</span>
                            </div>
                            <div class="flex justify-between items-center py-2">
                                <span class="text-muted">Total Duration:</span>
                                <span class="font-medium" data-bind="session.totalDuration">1 hour 45 minutes</span>
                            </div>
                        </div>
                    </div>

                    <!-- Cost Breakdown -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-6">
                        <h2 class="text-xl font-semibold mb-4">Cost Breakdown</h2>
                        
                        <div class="space-y-3 mb-4">
                            <div class="flex justify-between">
                                <span>Hourly Rate:</span>
                                <span data-bind="summary.hourlyRate">₹40/hour</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Duration:</span>
                                <span data-bind="summary.duration">1.75 hours</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Parking Fee:</span>
                                <span data-bind="summary.parkingFee">₹70.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Service Fee:</span>
                                <span data-bind="summary.serviceFee">₹5.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>GST (18%):</span>
                                <span data-bind="summary.gst">₹13.50</span>
                            </div>
                            <hr class="my-3">
                            <div class="flex justify-between text-xl font-bold">
                                <span>Total Amount:</span>
                                <span data-bind="summary.total" class="text-primary">₹88.50</span>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="bg-slate-50 rounded-lg p-4">
                            <div class="flex items-center">
                                <i class="fas fa-credit-card text-primary mr-3"></i>
                                <div>
                                    <p class="font-medium">Payment Method</p>
                                    <p class="text-sm text-muted" data-mock="true">•••• •••• •••• 1234 (Visa)</p>
                                </div>
                                <span class="ml-auto px-3 py-1 bg-secondary text-white rounded-full text-sm">
                                    <i class="fas fa-check text-xs mr-1"></i>
                                    Paid
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Receipt Actions -->
                    <div class="bg-white rounded-2xl shadow-sm p-6 mb-6">
                        <h2 class="text-xl font-semibold mb-4">Receipt & Support</h2>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <button data-event="click:downloadReceipt" class="p-4 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-left">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                        <i class="fas fa-download text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Download Receipt</h4>
                                        <p class="text-sm text-muted">Get PDF receipt</p>
                                    </div>
                                </div>
                            </button>
                            
                            <button data-event="click:emailReceipt" class="p-4 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-left">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                        <i class="fas fa-envelope text-green-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Email Receipt</h4>
                                        <p class="text-sm text-muted">Send to your email</p>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Return to Search -->
                    <div class="text-center">
                        <button data-event="click:returnToSearch" class="px-8 py-3 bg-primary text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            <i class="fas fa-search mr-2"></i>
                            Find Another Spot
                        </button>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: SessionSummary -->

        </div>
        <!-- @END_COMPONENT: MainApp -->

        <!-- @COMPONENT: ToastNotification [Notification system] -->
        <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2" style="display: none;">
            <div class="bg-white border border-green-200 rounded-lg shadow-lg p-4 flex items-center max-w-sm">
                <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center mr-3">
                    <i class="fas fa-check text-white text-sm"></i>
                </div>
                <div>
                    <p class="font-medium text-slate-900">Booking Confirmed!</p>
                    <p class="text-sm text-muted">Your parking spot has been reserved.</p>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: ToastNotification -->

    </div>
    <!-- @END_COMPONENT: SPMOSApp -->

    <script>
        // TODO: Implement React Context for state management
        // TODO: Implement API calls for real data
        // TODO: Implement WebSocket for real-time updates

        (function() {
            // @STATE: currentUser:object = null
            // @STATE: currentView:string = 'auth'
            // @STATE: selectedSpot:object = null
            // @STATE: bookingData:object = null
            // @STATE: sessionData:object = null

            // Mock state management
            let appState = {
                currentUser: null,
                currentView: 'auth',
                selectedSpot: null,
                bookingData: null,
                sessionData: null,
                parkingSpots: [
                    {
                        id: 1,
                        name: 'MG Marg Central Parking',
                        address: 'Near Tibet Road, Gangtok, Sikkim 737101',
                        rate: 40,
                        available: 12,
                        total: 20,
                        status: 'available',
                        hours: '24/7'
                    },
                    {
                        id: 2,
                        name: 'Lal Bazaar Shopping Complex',
                        address: 'Market Road, Gangtok, Sikkim 737101',
                        rate: 35,
                        available: 3,
                        total: 15,
                        status: 'almost_full',
                        hours: '6AM-10PM'
                    },
                    {
                        id: 3,
                        name: 'Rumtek Monastery Parking',
                        address: 'Rumtek Road, East Sikkim 737135',
                        rate: 25,
                        available: 25,
                        total: 30,
                        status: 'available',
                        hours: '5AM-8PM'
                    }
                ]
            };

            // Navigation functions
            function showView(viewName) {
                // Hide all views
                document.querySelectorAll('#landingPage, #searchPage, #parkingSession, #sessionSummary').forEach(el => {
                    el.classList.add('hidden');
                });

                // Show specific view
                const view = document.getElementById(viewName);
                if (view) {
                    view.classList.remove('hidden');
                }
                
                appState.currentView = viewName;
            }

            // Authentication handlers
            function handleLogin(event) {
                event.preventDefault();
                appState.currentUser = { name: 'John Doe', email: 'john@example.com' };
                document.getElementById('authModal').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                showView('landingPage');
                showToast('Welcome back!', 'success');
            }

            function handleSignup(event) {
                event.preventDefault();
                appState.currentUser = { name: 'New User', email: 'newuser@example.com' };
                document.getElementById('authModal').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                showView('landingPage');
                showToast('Account created successfully!', 'success');
            }

            function handleLogout() {
                appState.currentUser = null;
                document.getElementById('mainApp').classList.add('hidden');
                document.getElementById('authModal').classList.remove('hidden');
                showView('auth');
            }

            // Modal handlers
            function openBookingModal(spotId) {
                const spot = appState.parkingSpots.find(s => s.id === parseInt(spotId));
                if (spot) {
                    appState.selectedSpot = spot;
                    document.getElementById('bookingModal').classList.remove('hidden');
                }
            }

            function closeModal() {
                document.getElementById('bookingModal').classList.add('hidden');
                document.getElementById('navigationModal').classList.add('hidden');
            }

            // Booking handlers
            function confirmBooking() {
                if (appState.selectedSpot) {
                    appState.bookingData = {
                        spot: appState.selectedSpot,
                        startTime: new Date(),
                        duration: 2, // hours
                        totalCost: appState.selectedSpot.rate * 2 + 5 // rate * duration + service fee
                    };
                    
                    closeModal();
                    showView('parkingSession');
                    startParkingSession();
                    showToast('Booking confirmed! Navigate to your spot.', 'success');
                }
            }

            // Session management
            function startParkingSession() {
                appState.sessionData = {
                    startTime: new Date(),
                    isActive: true,
                    currentCost: 0
                };
                
                // Start session timer
                startSessionTimer();
            }

            function startSessionTimer() {
                const timer = setInterval(() => {
                    if (!appState.sessionData || !appState.sessionData.isActive) {
                        clearInterval(timer);
                        return;
                    }

                    const elapsed = Date.now() - appState.sessionData.startTime.getTime();
                    const hours = Math.floor(elapsed / (1000 * 60 * 60));
                    const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((elapsed % (1000 * 60)) / 1000);

                    const timerElement = document.getElementById('sessionTimer');
                    if (timerElement) {
                        timerElement.textContent = 
                            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }

                    // Calculate current cost
                    const hourlyRate = appState.selectedSpot ? appState.selectedSpot.rate : 40;
                    const currentCost = (elapsed / (1000 * 60 * 60)) * hourlyRate;
                    appState.sessionData.currentCost = currentCost;

                    const costElement = document.querySelector('[data-bind="session.currentCost"]');
                    if (costElement) {
                        costElement.textContent = `₹${currentCost.toFixed(2)}`;
                    }
                }, 1000);
            }

            function endSession() {
                if (appState.sessionData) {
                    appState.sessionData.isActive = false;
                    appState.sessionData.endTime = new Date();
                    showView('sessionSummary');
                    showToast('Session ended. Payment processed.', 'success');
                }
            }

            // Navigation
            function showNavigation() {
                document.getElementById('navigationModal').classList.remove('hidden');
            }

            function closeNavigationModal() {
                document.getElementById('navigationModal').classList.add('hidden');
            }

            // Toast notifications
            function showToast(message, type = 'info') {
                const container = document.getElementById('toastContainer');
                const toast = container.querySelector('div');
                
                // Update toast content
                const messageEl = toast.querySelector('.font-medium');
                if (messageEl) messageEl.textContent = message;
                
                // Show toast
                container.style.display = 'block';
                
                // Hide after 3 seconds
                setTimeout(() => {
                    container.style.display = 'none';
                }, 3000);
            }

            // Real-time updates simulation
            function simulateRealTimeUpdates() {
                setInterval(() => {
                    // Randomly update parking spot availability
                    appState.parkingSpots.forEach(spot => {
                        if (Math.random() < 0.1) { // 10% chance to update
                            const change = Math.random() < 0.5 ? -1 : 1;
                            spot.available = Math.max(0, Math.min(spot.total, spot.available + change));
                            
                            // Update status based on availability
                            if (spot.available === 0) {
                                spot.status = 'full';
                            } else if (spot.available < spot.total * 0.3) {
                                spot.status = 'almost_full';
                            } else {
                                spot.status = 'available';
                            }
                        }
                    });
                    
                    // Update UI if on search page
                    if (appState.currentView === 'searchPage') {
                        // TODO: Update parking spot cards with new availability
                    }
                }, 5000); // Update every 5 seconds
            }

            // Event listeners
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-event*="click:handleLogin"]')) {
                    handleLogin(e);
                } else if (e.target.closest('[data-event*="click:handleSignup"]')) {
                    handleSignup(e);
                } else if (e.target.closest('[data-event*="click:handleLogout"]')) {
                    handleLogout();
                } else if (e.target.closest('[data-event*="click:showSignup"]')) {
                    document.getElementById('loginForm').classList.add('hidden');
                    document.getElementById('signupForm').classList.remove('hidden');
                } else if (e.target.closest('[data-event*="click:showLogin"]')) {
                    document.getElementById('signupForm').classList.add('hidden');
                    document.getElementById('loginForm').classList.remove('hidden');
                } else if (e.target.closest('[data-event*="click:showSearchPage"]')) {
                    showView('searchPage');
                } else if (e.target.closest('[data-event*="click:openBookingModal"]')) {
                    const spotId = e.target.closest('[data-spot-id]').getAttribute('data-spot-id');
                    openBookingModal(spotId);
                } else if (e.target.closest('[data-event*="click:closeModal"]')) {
                    closeModal();
                } else if (e.target.closest('[data-event*="click:confirmBooking"]')) {
                    confirmBooking();
                } else if (e.target.closest('[data-event*="click:showNavigation"]')) {
                    showNavigation();
                } else if (e.target.closest('[data-event*="click:closeNavigationModal"]')) {
                    closeNavigationModal();
                } else if (e.target.closest('[data-event*="click:endSession"]')) {
                    endSession();
                } else if (e.target.closest('[data-event*="click:returnToSearch"]')) {
                    showView('searchPage');
                }
            });

            // Initialize app
            function initApp() {
                // Start real-time updates simulation
                simulateRealTimeUpdates();
                
                // Set initial view
                showView('auth');
                
                console.log('SPMOS app initialized successfully');
            }

            // Start the app when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initApp);
            } else {
                initApp();
            }
        })();
    </script>
</body>
</html>